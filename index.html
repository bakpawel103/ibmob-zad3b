<!DOCTYPE html>
<html>
    <head>
        <script src="https://unpkg.com/konva@8.3.4/konva.min.js"></script>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="container">
            <div class="split left">
                <button onclick="addRandomShape()" id="button" class="button">Generuj</a>
            </div>
            <div class="split right">
                <div id="container"></div>
            </div>
        </div>
    </body>

    <script>
        var width = window.innerWidth;
        var height = window.innerHeight;

        const RECTANGLE = 0;
        const TRIANGLE = 1;
        const CIRCLE = 2;

        var stage = new Konva.Stage({
            container: 'container',
            width: width,
            height: height,
            margin: 0,
        });

        var layer = new Konva.Layer();
        var rectX = stage.width() / 2 - 50;
        var rectY = stage.height() / 2 - 25;

        var box = new Konva.Rect();

        var layer = new Konva.Layer();
        stage.add(layer);

        var tr = new Konva.Transformer();
        layer.add(tr);
        layer.draw();
        layer.add(box);

        function addRandomShape() {
            var randomShape = Math.floor(Math.random() * (2 + 1));

            switch (randomShape) {
                case RECTANGLE:
                    layer.add(
                        new Konva.Rect({
                            x: Math.random() * 10,
                            y: Math.random() * 10,
                            width: 200,
                            height: 200,
                            fill: Konva.Util.getRandomColor(),
                            draggable: true
                        })
                    );
                    break;
                case TRIANGLE:
                    layer.add(
                        new Konva.RegularPolygon({
                            x: Math.random() * 10,
                            y: Math.random() * 10,
                            sides: 3,
                            radius: 100,
                            fill: Konva.Util.getRandomColor(),
                            draggable: true
                        })
                    );
                    break;
                case CIRCLE:
                    layer.add(
                        new Konva.Circle({
                            x: Math.random() * 10,
                            y: Math.random() * 10,
                            radius: 100,
                            fill: Konva.Util.getRandomColor(),
                            draggable: true
                        })
                    );
                    break;
                default:
                    break;
            }

            tr.forceUpdate();
            layer.draw();
        }
    </script>
</html>